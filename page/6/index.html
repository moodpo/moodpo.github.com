<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>Page 6 | Moodpo Blog</title>
  <meta name="author" content="yangxiaoxie">
  
  <meta name="description" content="moodpo">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  
  <meta property="og:site_name" content="Moodpo Blog"/>

  <link rel="alternate" href="/atom.xml" title="Moodpo Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-43415414-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>


<body>
  <div class="wrapper">
    <header id="header"><div class="title">
  <h1><a href="/">Moodpo Blog</a></h1>
  <p><a href="/">记录生活点滴，感悟程序人生</a></p>
</div>
<nav class="nav">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
    <div class="content">
  <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-03-09T05:22:36.000Z"><a href="/2013/03/09/hello-struts-2/">Mar 9 2013</a></time>
    
    
  
    <h1 class="title"><a href="/2013/03/09/hello-struts-2/">Hello Struts 2</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>本文主要复习Struts2的两种声明性架构：</p>
<ul>
<li>基于xml的声明性架构； </li>
<li>基于java注解的声明性架构.</li>
</ul>
<p>需要的jar包：</p>
<ul>
<li>commons-fileupload-1.2.1.jar</li>
<li>commons-io-1.3.2.jar</li>
<li>commons-logging-1.0.4.jar</li>
<li>commons-logging-api-1.1.jar</li>
<li>freemarker-2.3.16.jar </li>
<li>javassist-3.7.ga.jar</li>
<li>ognl-3.0.jar</li>
<li>struts2-core-2.2.1.1.jar</li>
<li>xwork-core-2.2.1.1.jar</li>
</ul>
<h3>1.基于xml的声明性架构</h3>
<p>web.xml配置：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">filter</span>&gt;</span>
    <span class="tag">&lt;<span class="title">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="title">filter-name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="tag">&lt;/<span class="title">filter-class</span>&gt;</span>
<span class="tag">&lt;/<span class="title">filter</span>&gt;</span>

<span class="tag">&lt;<span class="title">filter-mapping</span>&gt;</span>
    <span class="tag">&lt;<span class="title">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="title">filter-name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="title">url-pattern</span>&gt;</span>
<span class="tag">&lt;/<span class="title">filter-mapping</span>&gt;</span>
</pre></figure></code></pre>
<p>struts.xml配置：</p>
<pre><code><figure class="highlight"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="doctype">&lt;!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd"&gt;</span>
<span class="tag">&lt;<span class="title">struts</span>&gt;</span>
    <span class="comment">&lt;!-- 运行于开发者模式 --&gt;</span>
    <span class="tag">&lt;<span class="title">constant</span> <span class="attribute">name</span>=<span class="value">"struts.devMode"</span> <span class="attribute">value</span>=<span class="value">"true"</span>&gt;</span><span class="tag">&lt;/<span class="title">constant</span>&gt;</span>
    <span class="tag">&lt;<span class="title">package</span> <span class="attribute">name</span>=<span class="value">"struts2demo1"</span> <span class="attribute">namespace</span>=<span class="value">"/demo1"</span> <span class="attribute">extends</span>=<span class="value">"struts-default"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">action</span> <span class="attribute">name</span>=<span class="value">"Name"</span>&gt;</span>
            <span class="tag">&lt;<span class="title">result</span>&gt;</span>/nameCollection.jsp<span class="tag">&lt;/<span class="title">result</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">action</span>&gt;</span>
        <span class="tag">&lt;<span class="title">action</span> <span class="attribute">name</span>=<span class="value">"Hello"</span> <span class="attribute">class</span>=<span class="value">"xiaoxie.review.struts2demo.HelloworldAction"</span>&gt;</span>
            <span class="tag">&lt;<span class="title">result</span> <span class="attribute">name</span>=<span class="value">"SUCCESS"</span>&gt;</span>/helloworld.jsp<span class="tag">&lt;/<span class="title">result</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">action</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">package</span>&gt;</span>
<span class="tag">&lt;/<span class="title">struts</span>&gt;</span>
</pre></figure></code></pre>
<p>这个示例中包含了两个动作(action),其中一个几乎什么都没做。package元素是一个重要的容器元素，示例中它声明了一个当框架将url映射到动作时需要使用的命名空间：</p>
<pre><code><figure class="highlight"><pre><span class="method">http:</span>//+<span class="method">localhost:</span><span class="number">8080</span>/+struts2demo/+demo1/+helloworld.action
协议+主机名：端口+servlet上下文+命名空间+动作
</pre></figure></code></pre>
<p>nameCollection.jsp</p>
<pre><code><figure class="highlight"><pre>&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span>
    pageEncoding=<span class="string">"UTF-8"</span>%&gt;
<span class="xml"><span class="vbscript">&lt;%@ taglib prefix=<span class="string">"s"</span> uri=<span class="string">"/struts-tags"</span> %&gt;</span>
<span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Content-Type"</span> <span class="attribute">content</span>=<span class="value">"text/html; charset=UTF-8"</span>&gt;</span>
<span class="tag">&lt;<span class="title">title</span>&gt;</span>Name Collection<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>
    <span class="tag">&lt;<span class="title">center</span>&gt;</span>
        <span class="tag">&lt;<span class="title">div</span>&gt;</span>
            <span class="tag">&lt;<span class="title">h4</span>&gt;</span>输入姓名<span class="tag">&lt;/<span class="title">h4</span>&gt;</span>
            <span class="tag">&lt;<span class="title">s:form</span> <span class="attribute">action</span>=<span class="value">"Hello"</span>&gt;</span>
                <span class="tag">&lt;<span class="title">s:textfield</span> <span class="attribute">name</span>=<span class="value">"name"</span> <span class="attribute">label</span>=<span class="value">"姓名"</span>/&gt;</span>
                <span class="tag">&lt;<span class="title">s:submit</span> <span class="attribute">value</span>=<span class="value">"Submit"</span>&gt;</span><span class="tag">&lt;/<span class="title">s:submit</span>&gt;</span>
            <span class="tag">&lt;/<span class="title">s:form</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">center</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span></span>
</pre></figure></code></pre>
<p>helloworld.jsp</p>
<pre><code><figure class="highlight"><pre>&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span>
    pageEncoding=<span class="string">"UTF-8"</span>%&gt;
<span class="xml"><span class="vbscript">&lt;%@ taglib prefix=<span class="string">"s"</span> uri=<span class="string">"/struts-tags"</span> %&gt;</span>
<span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Content-Type"</span> <span class="attribute">content</span>=<span class="value">"text/html; charset=UTF-8"</span>&gt;</span>
<span class="tag">&lt;<span class="title">title</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>
    <span class="tag">&lt;<span class="title">center</span>&gt;</span>
        <span class="tag">&lt;<span class="title">h4</span>&gt;</span>Hello<span class="tag">&lt;/<span class="title">h4</span>&gt;</span>
        <span class="tag">&lt;<span class="title">div</span>&gt;</span><span class="tag">&lt;<span class="title">s:property</span> <span class="attribute">value</span>=<span class="value">"coutomeName"</span>/&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">center</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span></span>
</pre></figure></code></pre>
<p>HelloworldAction.java</p>
<pre><code><figure class="highlight"><pre><span class="package"><span class="keyword">package</span> <span class="title">xiaoxie</span>.<span class="title">review</span>.<span class="title">struts2demo</span>;

<span class="title">public</span> <span class="title">class</span> <span class="title">HelloworldAction</span> {</span>
    <span class="keyword">private</span> String name;
    <span class="keyword">private</span> String coutomeName;
    <span class="keyword">public</span> String getName() {
        <span class="keyword">return</span> name;
    }
    <span class="keyword">public</span> <span class="keyword">void</span> setName(String name) {
        <span class="keyword">this</span>.name = name;
    }

    <span class="keyword">public</span> String getCoutomeName() {
        <span class="keyword">return</span> coutomeName;
    }
    <span class="keyword">public</span> <span class="keyword">void</span> setCoutomeName(String coutomeName) {
        <span class="keyword">this</span>.coutomeName = coutomeName;
    }
    <span class="keyword">public</span> String execute(){
        setCoutomeName(<span class="string">"Hello "</span>+getName());
        <span class="keyword">return</span> <span class="string">"SUCCESS"</span>;
    }
}
</pre></figure></code></pre>
<p>使用JavaBean的方式编写action使领域数据总是存储在action中,action的execute方法可以很方便的访问到数据；而为了在其他地方(比如jsp)也能访问到数据，框架底层也把数据放到了ValueStack中。ValueStack的机制是将action中的所有属性作为它的第一级属性公开出来，这样就可以使用ONGL来访问(<code><s:property value="coutomeName"/></code>).</p>
<h3>2.基于java注解的声明性架构</h3>
<p>在web.xml中添加以下代码</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">filter</span>&gt;</span>
    <span class="tag">&lt;<span class="title">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="title">filter-name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="tag">&lt;/<span class="title">filter-class</span>&gt;</span>
    <span class="tag">&lt;<span class="title">init-param</span>&gt;</span>
        <span class="comment">&lt;!-- 扫描xiaoxie包，查找注解 --&gt;</span>
        <span class="tag">&lt;<span class="title">param-name</span>&gt;</span>actionPackages<span class="tag">&lt;/<span class="title">param-name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">param-value</span>&gt;</span>xiaoxie<span class="tag">&lt;/<span class="title">param-value</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">init-param</span>&gt;</span>
<span class="tag">&lt;/<span class="title">filter</span>&gt;</span>
</pre></figure></code></pre>
<p>标记哪个类是action类有两种方法：</p>
<ul>
<li>让action类实现com.opensymphony.xwork2.Action接口</li>
<li>使用命名约定，类名以Action结尾 </li>
</ul>
<p>例如：</p>
<pre><code><figure class="highlight"><pre><span class="comment">@Result(name="SUCCESS"</span>,<span class="comment">location="/helloworld</span>.<span class="comment">jsp")</span>  
<span class="comment">public</span> <span class="comment">class</span> <span class="comment">HelloworldAction{</span> <span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span> <span class="comment">}
</pre></figure></code></pre>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-03-04T05:14:24.000Z"><a href="/2013/03/04/byte-of-python-notes-2/">Mar 4 2013</a></time>
    
    
  
    <h1 class="title"><a href="/2013/03/04/byte-of-python-notes-2/">简明 Python 教程笔记(下)</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>今天星期一，周末综合症发作，头痛不行，下班后休息了一会终于活了过来。继续上篇的笔记吧。</p>
<h3>1. 类</h3>
<h4>1.1 类的定义</h4>
<pre><code><figure class="highlight"><pre><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>
    <span class="keyword">pass</span> <span class="comment"># 空表达式</span>

p = Person()
<span class="keyword">print</span> p
</pre></figure></code></pre>
<h4>1.2 类的方法</h4>
<pre><code><figure class="highlight"><pre><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>
    <span class="function"><span class="keyword">def</span> <span class="title">sayHi</span><span class="params">(self)</span>:</span>
        <span class="keyword">print</span> <span class="string">'Hello, how are you?'</span>

p = Person()
p.sayHi()
</pre></figure></code></pre>
<p>在类中定义方法时，类的第一个参数必须是<code>self</code>。</p>
<p><strong>init</strong>方法在类的一个对象被建立时，马上运行。这个方法可以用来对你的对象做一些你希望的初始化 。类似与Java中类的构造方法。</p>
<pre><code><figure class="highlight"><pre><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>
    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span>
        self.name = name
    <span class="function"><span class="keyword">def</span> <span class="title">sayHi</span><span class="params">(self)</span>:</span>
        <span class="keyword">print</span> <span class="string">'Hello, my name is'</span>, self.name

p = Person(<span class="string">'Swaroop'</span>)
p.sayHi()
</pre></figure></code></pre>
<p>Python 中所有的类成员(包括数据成员)都是 公共的 ,所有的方法都是有效的 。只有一个例外:如果你使用的数据成员名称以 双下划线前缀 比如__privatevar,Python 的名称管理体系会有效地把它作为私有变量。</p>
<p>当对象不再被使用时，<strong>del</strong>方法就会运行。</p>
<h4>1.3 继承</h4>
<pre><code><figure class="highlight"><pre><span class="class"><span class="keyword">class</span> <span class="title">SchoolMember</span>:</span>
    ......
<span class="class"><span class="keyword">class</span> <span class="title">Teacher</span><span class="params">(SchoolMember)</span>:</span>
    ......
<span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(SchoolMember)</span>:</span>
    ......
</pre></figure></code></pre>
<p>一个术语的注释——如果在继承元组中列了一个以上的类,那么它就被称作多重继承 。</p>
<h3>2. 输入/输出操作</h3>
<pre><code><figure class="highlight"><pre>f = file(<span class="string">'poem.txt'</span>,<span class="string">'w'</span>)  <span class="comment"># r读模式 w写模式 a追加模式 </span>
f.<span class="keyword">write</span>(pome)
f.<span class="keyword">close</span>()

f = file(<span class="string">'poem.txt'</span>)

<span class="keyword">while</span> True:
    line = f.<span class="keyword">readline</span>()
    <span class="keyword">if</span> len(line) == <span class="number">0</span>:
        <span class="keyword">break</span>
    <span class="keyword">print</span> line
f.<span class="keyword">close</span>()
</pre></figure></code></pre>
<h3>3. 存储器pickle</h3>
<p>Python提供一个标准的模块，称为pickle。使用它你可以在一个文件中储存任何Python对象，之后你又可以把它完整无缺地取出来。这被称为 持久地 储存对象。</p>
<pre><code><figure class="highlight"><pre><span class="import"><span class="keyword">import</span> cPickle <span class="keyword">as</span> p</span>

<span class="title">shoplist</span> = ['apple','mango','carrot']

<span class="title">f</span> = file('shoplist.<span class="typedef"><span class="keyword">data</span>','w')</span>
<span class="title">p</span>.dump(shoplist,f)
<span class="title">f</span>.close

<span class="title">del</span> shoplist

<span class="title">f</span> = file('shoplist.<span class="typedef"><span class="keyword">data</span>')</span>
<span class="title">storedlist</span> = p.load(f)
<span class="title">print</span> storedlist
</pre></figure></code></pre>
<h3>4. 异常</h3>
<h4>4.1 处理异常</h4>
<pre><code><figure class="highlight"><pre><span class="comment">try:</span>
    <span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span>
<span class="comment">except</span> <span class="comment">EOFError:</span>
    <span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span>
<span class="comment">except:</span>
    <span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span>
<span class="comment">finally:</span>
    <span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span><span class="string">.</span>
</pre></figure></code></pre>
<h4>4.2 引发异常</h4>
<p>使用 raise 语句 引发 异常。你还得指明错误/异常的名称和伴随异常触发的 异常对象。</p>
<pre><code><figure class="highlight"><pre><span class="keyword">if</span> len(s) &lt; <span class="number">3</span>:
    <span class="keyword">raise</span> ShortInputException(len(s), <span class="number">3</span>)
<span class="comment">#参数：实际值/期望值</span>
</pre></figure></code></pre>
<p>类似于java中的throw</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-03-03T05:12:32.000Z"><a href="/2013/03/03/byte-of-python-notes-1/">Mar 3 2013</a></time>
    
    
  
    <h1 class="title"><a href="/2013/03/03/byte-of-python-notes-1/">简明 Python 教程笔记(上)</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>利用周末时间终于看完了《简明Python教程》，在线地址在<a href="http://woodpecker.org.cn/abyteofpython_cn/chinese/">这里</a>，说来真是惭愧，本来想过年放假时看完的，想不到竟然托到了现在。废话不多说，还是在这里记录下看书时做的笔记吧。</p>
<h3>1. 控制流</h3>
<p>在Python中有三种控制流语句——if、for和while。</p>
<h4>1.1 if语句</h4>
<pre><code><figure class="highlight"><pre><span class="type">number</span> = <span class="number">23</span>
guess = int(raw_input('Enter an <span class="type">integer</span> : '))

<span class="keyword">if</span> guess == <span class="type">number</span>:
    print 'Congratulations, you guessed <span class="keyword">it</span>.' 
    print <span class="string">"(but you do not win any prizes!)"</span> 
elif guess &lt; <span class="type">number</span>:
    print 'No, <span class="keyword">it</span> <span class="keyword">is</span> a little higher than <span class="keyword">that</span>' 
<span class="keyword">else</span>:
    print 'No, <span class="keyword">it</span> <span class="keyword">is</span> a little lower than <span class="keyword">that</span>' 

print 'Done'
</pre></figure></code></pre>
<h4>1.2 while语句</h4>
<pre><code><figure class="highlight"><pre><span class="type">number</span> = <span class="number">23</span>
<span class="property">running</span> = True

<span class="keyword">while</span> <span class="property">running</span>:
    guess = int(raw_input('Enter an <span class="type">integer</span> : '))

    <span class="keyword">if</span> guess == <span class="type">number</span>:
        print 'Congratulations, you guessed <span class="keyword">it</span>.' 
        <span class="property">running</span> = False 
    elif guess &lt; <span class="type">number</span>:
        print 'No, <span class="keyword">it</span> <span class="keyword">is</span> a little higher than <span class="keyword">that</span>' 
    <span class="keyword">else</span>:
        print 'No, <span class="keyword">it</span> <span class="keyword">is</span> a little lower than <span class="keyword">that</span>' 
<span class="keyword">else</span>:
    print 'The <span class="keyword">while</span> loop <span class="keyword">is</span> <span class="keyword">over</span>.' 

print 'Done'
</pre></figure></code></pre>
<h4>1.3 for语句</h4>
<pre><code><figure class="highlight"><pre><span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>, <span class="number">5</span>):
    print i
<span class="keyword">else</span>:
    print <span class="attribute">'The</span> <span class="keyword">for</span> <span class="keyword">loop</span> <span class="keyword">is</span> over'
</pre></figure></code></pre>
<p>除此之外，还有<code>break</code>和<code>continue</code>语句，与java语言相同。</p>
<h3>2. 函数</h3>
<h4>2.1 函数定义</h4>
<pre><code><figure class="highlight"><pre><span class="function"><span class="keyword">def</span> <span class="title">sayHello</span><span class="params">()</span>:</span>
    <span class="keyword">print</span> <span class="string">'Hello World!'</span> <span class="comment"># 函数体</span>

sayHello() <span class="comment"># 调用函数</span>
</pre></figure></code></pre>
<h4>2.2 文档字符串</h4>
<pre><code><figure class="highlight"><pre><span class="function"><span class="keyword">def</span> <span class="title">printMax</span><span class="params">(x, y)</span>:</span>
    <span class="string">'''Prints the maximum of two numbers.

    The two values must be integers.'''</span>

    ...... <span class="comment"># 函数体</span>
</pre></figure></code></pre>
<p>文档字符串的惯例是一个多行字符串，它的首行以大写字母开始，句号结尾。第二行是空行，从第三行开始是详细的描述。DocStrings也适用于模块和类。可使用<strong>doc</strong>（注意双下划线）调用。</p>
<pre><code><figure class="highlight"><pre><span class="title">print</span> printMax.__doc__
</pre></figure></code></pre>
<h3>3. 模块</h3>
<h4>3.1 模块的<strong>name</strong></h4>
<p>在程序本身被使用的时候运行主块，而在它被别的模块输入的时候不运行主块，以通过模块的<strong>name</strong>属性完成。</p>
<pre><code><figure class="highlight"><pre><span class="keyword">if</span> __name__ == '__main__':
    print 'This program <span class="keyword">is</span> being <span class="command">run</span> <span class="keyword">by</span> itself'
<span class="keyword">else</span>:
    print 'I am being imported <span class="keyword">from</span> another module'
</pre></figure></code></pre>
<p>测试结果：</p>
<pre><code><figure class="highlight"><pre><span class="variable">$ </span>python using_name.py
<span class="constant">This</span> program is being run by itself

<span class="variable">$ </span>python
&gt;&gt;&gt; import using_name
<span class="constant">I</span> am being imported from another <span class="class"><span class="keyword">module</span>
&gt;&gt;&gt;</span>
</pre></figure></code></pre>
<h4>3.2 dir()函数</h4>
<p>dir函数用来列出模块定义的属性和方法。</p>
<pre><code><figure class="highlight"><pre>$ python
&gt;&gt;&gt; <span class="import"><span class="keyword">import</span> sys</span>
&gt;&gt;&gt; dir(sys) # get list <span class="keyword">of</span> attributes for sys <span class="module"><span class="keyword">module</span>
</pre></figure></code></pre>
<h4>3.3 其他内容</h4>
<p>sys.argv变量是一个字符串的&quot;列表&quot;，它包含了 命令行参数 的列表，即使用命令行传递给你的程序的参数。</p>
<p>sys.path包含输入模块的目录名列表。</p>
<p>help()函数将打印 &quot;文档字符串&quot;内容。</p>
<p>raw_input(&#39;Enter an integer:&#39;) 用于接收用户的输入。</p>
<h3>4. 数据结构--列表、元组和字典</h3>
<h4>4.1 列表</h4>
<pre><code><figure class="highlight"><pre><span class="title">shoplist</span> = ['apple',<span class="string"> 'mango'</span>,<span class="string"> 'carrot'</span>,<span class="string"> 'banana'</span>] # 定义
<span class="title">len</span>(shoplist)  # 内置的返回列表大小的函数

<span class="title">for</span> item <span class="keyword">in</span> shoplist: # 循环打印列表元素内容
    print item

<span class="title">shoplist</span>.append('rice')

<span class="title">shoplist</span>.sort()

<span class="title">olditem</span> = shoplist[<span class="number">0</span>]

<span class="title">del</span> shoplist[<span class="number">0</span>] # 删除列表中的元素
</pre></figure></code></pre>
<h4>4.2 元组</h4>
<p>元组同字符串一样，是不可变的，无法修改的。</p>
<pre><code><figure class="highlight"><pre>zoo = (<span class="attribute">'wolf</span>', <span class="attribute">'elephant</span>', <span class="attribute">'penguin</span>') # 定义元组
new_zoo = (<span class="attribute">'monkey</span>', <span class="attribute">'dolphin</span>', zoo)
new_zoo[<span class="number">2</span>][<span class="number">2</span>]
</pre></figure></code></pre>
<p>只有一个元素的元组这样写，必须加逗号</p>
<pre><code><figure class="highlight"><pre><span class="setting">singleton = <span class="value">(<span class="number">2</span>,)</span></span>
</pre></figure></code></pre>
<p>元组最通常的用法是用在打印语句中</p>
<pre><code><figure class="highlight"><pre>age = <span class="number">22</span>
<span class="property">name</span> = 'Swaroop'
print '%s <span class="keyword">is</span> %d years old' % (<span class="property">name</span>, age)
print 'Why <span class="keyword">is</span> %s playing <span class="keyword">with</span> <span class="keyword">that</span> python?' % <span class="property">name</span>
</pre></figure></code></pre>
<h4>4.3 字典</h4>
<p>字典类似&quot;键值对&quot;。</p>
<pre><code><figure class="highlight"><pre>d = {key1 : value1, key2 : value2 } <span class="preprocessor"># 定义</span>
d[key1]
del d[key1]

<span class="keyword">for</span> key,<span class="keyword">value</span> <span class="keyword">in</span> d:
    print <span class="string">'%s is $s'</span>%(key,<span class="keyword">value</span>)

<span class="keyword">if</span> key <span class="keyword">in</span> d:
    ......
</pre></figure></code></pre>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-02-25T05:04:34.000Z"><a href="/2013/02/25/twitter-revolution-maintenance-of-stability-of-the-weibo/">Feb 25 2013</a></time>
    
    
  
    <h1 class="title"><a href="/2013/02/25/twitter-revolution-maintenance-of-stability-of-the-weibo/">安替：革命的推特、维稳的微博</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>来源：<a href="https://groups.google.com/forum/?fromgroups=#!topic/paste/XiVkV4msJG8">Google网上论坛</a></p>
<p>2011年阿拉伯之春，社交媒体如推特（Twitter）和脸书（Facebook）在推翻突尼斯、埃及独裁政权上起到了重要作用，如果不是决定作用的话。所以全世界都把目光上转向了全球最大的非民主国家中国，和全球用户最多的社交媒体“微博”，大部分相关研究和报道，都在试图回答这样一个问题：微博对中国民主化进程的作用到底会是如何？</p>
<p>简单地回答：只要中国政权不发生质变，微博不被新技术取代，它就一直在帮助中国政府把信息控制权集中到中央，对中国民主化的作用不但复杂，而且很可能会是负面。</p>
<p>推特虽然诞生于2006年，但真正进入中国网友视界，是2009年2月的央视大火。很快大家发现，推特上每一条推的140字限制，简直就是在给中国人开后门：140个字母的英文大约20个单词，也就是一句话，而140个字的中文是完整一段话，不但可以完全涵盖新闻报道五元素，还可以当成BBS来简单讨论事情。根据统计，中文在推特上的信息有效性是英文的3.6倍。很快，推特和中国的第一个高度克隆产品“饭否”，被中国网友当成新闻工具。例如，当年7月发生新疆骚乱时，推特用户郭怡广（@kaiserkuo）和我联手第一个把消息在新华社之前用英文在推特上发了出去。</p>
<p>也因为新疆骚乱，饭否被关（之前6月推特已经被“中华防火墙”GFW封锁）。8月，新浪推出“微博”，除了克隆推特基本功能之外，还创新地增加了评论区、自动显示图片，后来还把新浪博客的名人策略移植到了微博上，有了所谓的大V用户。当时负责微博的新浪副总裁陈彤本身就是管理四通利方BBS起家，经营新浪新闻门户和新浪博客风生水起，他把BBS、门户、博客的所有中国用户喜欢的特点都一股脑放在了微博上。</p>
<p>对推特更大的打击是2011年2月-6月的茉莉花镇压，全国上百人因为推特上所谓的2月20日茉莉花街头运动被拘，特别是艾未未事件，对整个推特中文圈产生了“寒蝉效应”，很多和体制有关的用户心生退意，舍弃推特，全心投入微博。同时，推特本身的安全升级和GFW不断高耸，让中国用户上推难度大幅度增加。</p>
<p>一边各种天时地利人和，一边各种打压和麻烦，很快全民上微博，结果就是今天，单新浪微博就号称3亿用户，而依然被封的推特，中文用户估计只有30万人以上，后者只有前者的千分之一。这三亿用户的微博，也的确成为中国民众言论自由实践的训练平台，揭黑不断，官不聊生。</p>
<p>不过，任何人由此对微博在中国作用产生了乐观估计，认为最终会推动中国民主化进程，那就错了。因为虽然原始克隆自推特，微博和推特却因结构上的不同，对社会政治的作用，有了天差地别。</p>
<p>推特、脸书、Youtube这些社会媒体，之所以能推动阿拉伯革命，关键在于两个因素：分散（De-centralized）信息产生机制和服务器独立于政权之外。Web 2.0的用户产生内容（UGC）这样的分散信息产生机制，让每一个埃及网友都成为记者和新闻官，而这些服务器一直放在信息自由的美国西岸，导致埃及总统穆巴拉克没办法控制这些网友的关系和信息。国家地理边界，因为这些Web 2.0服务，在虚拟空间拉开了一个大豁口，而这些服务器在海外的Web2.0服务，就成为一个“信息自由租界”，本国公民可以在此虚拟聚合、讨论和组织，政权之手鞭长莫及。</p>
<p>微博却是不折不扣另外的东西。它虽然有分散信息产生机制，每个微博用户的确也像一个记者和新闻官，但微博服务器却是位于北京，被中国中央政府牢牢控制，不但对信息管理有牲杀大权，而且甚至有计算机接口可以直接操作服务器。</p>
<p>互联网世界的权力斗争，本质上是服务器控制权之争。控制了3亿微博用户的服务器，就是控制了中国所有微博用户的所有信息和关系。这等于假设把维基解密的服务器放在白宫办公室里面，那样阿桑奇再厉害，也没办法对美国政府有任何造次。用网络分析、数据挖掘（Datamining）、地理标记这些计算机技术，中国中央政府不但能根据彼此互动情况准确画出全国异议人士的关系网，而且能通过关键字监控和语义分析，提前预测可能会发生的公民行动，乃至用户的意识形态倾向，通知各地公安机构，及早进行网格化布控，把对政权的威胁消灭在摇篮里。服务器放在言论自由法治国家的推特，是革命的工具，但服务器放在不民主国家的微博，却是《1984》的第一次实践。</p>
<p>但这不是微博故事的全部。微博服务器，是被“中国中央政府”控制，所以，互联网进入中国后第一次，地方政府官员完全没办法删除批评自身的帖子，必须有求与中央。在中国，有事发生，删贴是常规，不删贴才是政治异动。2012年2月王立军叛逃时，重庆市当然希望删除微博上所有关于王立军甚至薄熙来的传闻，而采用“休假式治疗”的官方解释。但此刻政治斗争已经产生，负责舆论和互联网管理的宣传官员乐于围观，在之后两个月内，微博成了击毁薄熙来重庆派系的言论市场，流言四起，成了薄熙来王国覆灭的重大推力。</p>
<p>不仅是地方政府，连一些不听话的部委也被中央微博监管机构抛弃。2011年7月温州动车事故发生后，五天之内没有任何删除命令，新浪微博用户对此事的讨论超过了1000万条，动员了几乎全部媒体对铁道部展开彻底批评，一直到温家宝去现场视察，禁令才到。这显然对前部长刘志军的处理有关，铁道部这样的独立王国，如果要打散，舆论的支持是必须的政治安排。</p>
<p>和薄熙来与刘志军相比，“带表哥”、“房哥”、“房姐”那样的地方官员，自然更没资格获得中央微博舆论管理机构的奥援，在亿万网友的攻击下，如待宰羔羊。微博，正如十年多前的央视《焦点访谈》，成了中央治理地方、镇压派系的最佳舆论工具，简单说，微博就是央视2.0，而网友进入了一个几乎可以自由批评地方官员的时代。</p>
<p>如果说1994年朱荣基税制改革，是实践陈云的主张“中央的政治权威，要有中央的经济权威作基础”的话，那么2009年后的微博管理，是“中央的政治权威，要有中央的信息控制权威作基础”，从此，只有中央政府，才能有效影响全国舆论，中国的舆论控制，比2009年之前更加“中央集中化（Centralized）”，从某种意义上说，微博是共产党政权控制地方的高级维稳工具。</p>
<p>简单说，删微博，只有中央政府才能做。地方政府为了适应这样的变化，只能通过三个方法，第一是建立现代信息发布机制，雇佣专业上被成为Spin Doctor的“微博发言人”；第二，被迫接受压力，道歉，并且进行一定程度的改革和透明化努力；第三，如果地方领导人没有深厚中南海关系，就得雇佣专业上被成为Lobbyist的中央代理人，说服中央微博舆论管理机构删贴。《新世纪周刊》揭露的一些所谓“非法删贴”现象，就是这些中央代理人的生意，这个产业，每年都是数亿人民币。</p>
<p>微博不是公民社会的福音。信息发布分散化造就了微博成为国民言论自由训练场，但信息控制精密化、中央集中化造成了公民社会空间缩小。政治改革转型，大都伴随着地方分权（Devolution）的过程，即便是中国的经济改革，也是从安徽农村和沿海城市开始，公民社会的成长，往往是对这些分权造成权力空隙的利用。但今天的中国，微博覆盖了全部舆论场，而能被审查通过的市民运动，也就是类似名人发起的慈善活动、以及针对地方政府的邻避环保运动。这种不会积累公民社会组织能力、不会损伤中央权威并且一切在中央可控之下的活动，能推动中国社会的程度也非常有限。</p>
<p>微博的中国，是信息过载、愤怒漫溢，但行动受限、也无法组织的三亿网民。他们是活火山，随时会爆发，但却会毫无章法。这造就了一个危险并且无法完全预测的中国社会未来。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-02-04T04:59:56.000Z"><a href="/2013/02/04/aircrack-ng-nine-crack-mode/">Feb 4 2013</a></time>
    
    
  
    <h1 class="title"><a href="/2013/02/04/aircrack-ng-nine-crack-mode/">aircrack-ng的九种攻击模式的介绍</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>来源：<a href="http://jim19770812.blogspot.com/2012/05/aircrack-ng.html">链接</a></p>
<p>因为blogspot被墙，这篇译文在国内的朋友想看到就比较麻烦了，所以特意转来。</p>
<p>Aircrack-ng套装中，aireplay-ng模块提供了9种攻击模式，下面是对这9种攻击模式的介绍。</p>
<h3>1.Attack 0: Deauthentication （解除认证）</h3>
<p>该攻击会向指定AP发送结束认证包将一个或多个客户端与AP断开，断开客户端有如下的好处</p>
<ul>
<li>找到隐藏的ESSID，这是个未开始广播的的ESSID</li>
<li>在强制客户端握手的时候捕获WPA/WPA2握手数据</li>
<li>生成ARP请求（windows客户端有时候会在断开连接时清空自己的ARP缓存）</li>
</ul>
<h3>2.Attack 1: Fake authentication（伪装客户端连接）</h3>
<p>伪装客户端连接允许你执行两类WEP认证（开放系统和共享密钥），这对在需要连接到一个没有任何客户端连接的AP时是非常有用的。需要注意的是伪装客户端连接不产生任何ARP包，也不能用来认证和关联WPA/WPA2 AP。</p>
<h3>3.Attack 2: Interactive packet replay（交互发包）</h3>
<p>这个攻击允许注入一个特殊的包，可以从两个来源获取包，一个是从无线网卡获取包，另一个是从一个pcap文件。很多开源工具都可以抓取Pcap格式的文件，一般的做法是用packetforge-ng命令创建。</p>
<p>如果交互包发送成功，就意味着AP接受了交互包，并且生成一个新的inititialization vectory (初始向量，简称IV)。 为了实现这个功能，我们需要选择一个包，在这之前需要先弄清楚两个概念：</p>
<p>无线网络的广播MAC地址是FF:FF:FF:FF:FF:FF，当AP收到包含FF:FF:FF:FF:FF:FF特征的ARP请求时会循环发包，需要注意的是，这个ARP请求包的To DS标志必须设置成1</p>
<p>所以airreplay-ng过滤选项： -b：无线AP的MAC地址。<br>-d：广播的MAC地址，也就是FF:FF:FF:FF:FF:FF。<br>-t：1表示设置To Distribution System标志，0表示不设置To Distribution System标志。</p>
<p>为了使得注入包看上去更像是个原生的包，我们需要了解下面几个选项：<br>-p 0841：设置祯控制字段，使得包看上去像是从客户端发到AP的一样，一定要把 &quot;To DS&quot;设置成1。<br>-c FF:FF:FF:FF:FF:FF：设置广播的MAC地址，这会让AP重新发送包并且得到一个新的IV。 </p>
<h3>4.Attack 3: ARP request replay attack(ARP请求攻击)</h3>
<p>通过ARP请求生成新的IV是常用的可靠的攻击手段。程序监听一个ARP包并转发回AP，反过来，因为AP重复收到了包，会一次又一次的重复转发相同的包，然而每个重复的ARP包都在AP有一个新的IV，就是这些新的IV能够让你获取WEP密码。</p>
<p>ARP是address resolution protocol，TCP/IP协议使用ARP来把一个IP地址转换成一个物理地址，就像是以太网地址那样，一个主机希望获取一个物理地址就得向TCP/IP网络广播一个ARP请求，网络上的主机会回复一个物理地址。ARP是aircrack-ng提供的许多攻击的基础。</p>
<h3>5.Attack 4: KoreK chopchop attack</h3>
<p>该攻击如果成功的话会在不知道key的情况下解析WEP数据包。一般用于破解动态WEP，该攻击不能用于找回WEP密码，但是可以用来显示数据明文。然而一些AP可以抵御这类攻击，所以KoreK chopchop attack不是每次都能成功。 实际上AP返回的包长是60字节，如果不足42字节，aireplay会尝试猜测余下的缺失数据，而后会自动检查包头的校验和，KoreK chopchop attack需要至少一个WEP数据包。</p>
<h3>6.Attack 5: Fragmentation attack (碎片攻击)</h3>
<p>该攻击成功的话可以获取包含150字节的PRGA（pseudo random generation algorithm），也叫做伪随机码生成算法，该攻击只是用于获取PRGA而不能用来找回WEP密码，可以用packetforge-ng攻击使用这个PRGA生成用于各种注入攻击的数据包。至少需要从AP获得一个数据包。</p>
<p>基本上，程序会从数据包中获取少量的密钥信息，并向AP尝试发送包含少量密钥信息的ARP and/or LLC包。如果包可以成功返回，那么程序会从中获取更多的密钥信息，这个过程会不断的重复，直到获取了足够的1500字节PRGA数据。注意PRGA有时候也会少于1500字节。</p>
<h3>7.Attack 6: Cafe-latte attack</h3>
<p>Cafe-latte attack攻击允许你从一个客户端获取WEP密码，简单的说，就是从客户端抓取ARP包。首先使用airodump-ng抓取ARP包，随后使用aricrack-ng来分析出WEP密码</p>
<h3>8.Attack 7: Client-oriented fragmentation attack</h3>
<p>也叫做Hirte attack，是一种在客户端用IP或者ARP包攻击的方式，它增强了Cafe Latte attack，允许无限制的使用客户端的任何ARP包。</p>
<p>这个攻击需要一个来自客户端的ARP包或者IP包，我们需要生成一个ARP请求，该请求包的第33字位必须是客户端IP地址，并且目标MAC地址必须是全0，然而实际应用中，目标MAC地址可以是任意数字。</p>
<p>在包中，第23位（ARP包）或者第21位（IP包）是客户端的IP地址，如果包长是68字节或者86字节，包的最后附加有广播MAC地址，不满足这些条件的话，就认为这个包就是个IP包。</p>
<h3>9.Attack 9: Injection test （注入测试）</h3>
<p>如果你的无线网卡可以成功注入并且能够确定到AP的响应时间，并且你有两块无线网卡的话，就可以使用Injection test攻击。它可以确定哪个特别的注入测试能成功执行。</p>
<p>基本的injection test攻击提供附加的重要信息，首先它可以列出能响应广播所有AP，其次通过30次发包测试可以获得AP的通讯质量（以百分比的形式显示通讯质量），你可以任选AP的名字/MAC地址，你可以使用测试一个指定的AP还是测试一个隐藏的SSID。 如果实现呢？接下来将简单的描绘如何执行测试。 程序最初发送了广播请求，请求会询问AP“你是谁？”，然后收到请求的AP会返回一个关于自身的描述（并不是每个AP都会反馈这种类型的请求），只要程序可以收到AP的响应，那么这块无线网卡就可以成功注入。</p>
<p>较详细的内容请查看官网介绍：<a href="http://www.aircrack-ng.org/doku.php?id=aireplay-ng。">http://www.aircrack-ng.org/doku.php?id=aireplay-ng。</a></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>




<nav id="pagination">
  
    <a href="/page/5/" class="prev">Prev</a>
  
  
    <a href="/page/7/" class="next">Next</a>
  
  <div class="clearfix"></div>
</nav></div>
  </div>
  <div class="widget-wrapper">
    <aside id="sidebar">
  
  
</aside>
<div class="clearfix"></div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2013 <a href="/">yangxiaoxie</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'moodpo' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>