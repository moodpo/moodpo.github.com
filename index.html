<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>Moodpo Blog</title>
  <meta name="author" content="yangxiaoxie">
  
  <meta name="description" content="moodpo">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  
  <meta property="og:site_name" content="Moodpo Blog"/>

  <link rel="alternate" href="/atom.xml" title="Moodpo Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-43415414-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>


<body>
  <div class="wrapper">
    <header id="header"><div class="title">
  <h1><a href="/">Moodpo Blog</a></h1>
  <p><a href="/">记录生活点滴，感悟程序人生</a></p>
</div>
<nav class="nav">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
    <div class="content">
  <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-09-15T03:26:41.000Z"><a href="/2013/09/15/the-good-parts-of-javascript-function-2/">Sep 15 2013</a></time>
    
    
  
    <h1 class="title"><a href="/2013/09/15/the-good-parts-of-javascript-function-2/">JavaScript 规范编程笔记：函数（二）</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h3>1. 给类型增添方法</h3>
<p>JavaScript 允许给语言的基本类型增加方法。以下是各种例子：</p>
<pre><code><figure class="highlight"><pre><span class="comment">// 通过给 Function.prototype 增加方法使得该方法对所有函数可用</span>
Function.prototype.method = <span class="keyword">function</span>(name, func){
    <span class="keyword">this</span>.prototype[name] = func;
    <span class="keyword">return</span> <span class="keyword">this</span>;    
};

<span class="comment">// 给数字类型添加一个提取数字中的整数部分的方法</span>
Number.method(<span class="string">'integer'</span>, <span class="keyword">function</span>(){
    <span class="keyword">return</span> Math[<span class="keyword">this</span> &lt; <span class="number">0</span> ? <span class="string">'ceiling'</span> : <span class="string">'floor'</span>](<span class="keyword">this</span>);
});

document.writeln((-<span class="number">10</span> / <span class="number">3</span>).integer());  <span class="comment">// -3</span>

<span class="comment">// 给字符串添加一个 trim 方法</span>
String.method(<span class="string">'trim'</span>, <span class="keyword">function</span>(){
    <span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">''</span>);
});

document.writeln(<span class="string">'"'</span> + <span class="string">" neat "</span>.trim() + <span class="string">'"'</span>);
</pre></figure></code></pre>
<p>基本类型的原型是公共的结构，所以在类库混用时需要判断，只在确定没有该方法时才添加它。</p>
<pre><code><figure class="highlight"><pre><span class="comment">// 有条件的增加一个方法</span>
Function<span class="variable">.prototype</span><span class="variable">.method</span> = function(name, func){
    <span class="keyword">if</span>(!<span class="keyword">this</span><span class="variable">.prototype</span>[name]){
        <span class="keyword">this</span><span class="variable">.prototype</span>[name] = func;
    }
    <span class="keyword">return</span> <span class="keyword">this</span>;
};
</pre></figure></code></pre>
<h3>2. 变量作用域</h3>
<p>JavaScript只有函数作用域，而不支持会计作用域。那意味着定义在函数中德参数和变量在函数外部是不可见的，而且在一个函数中的任何位置定义的变量在该函数中的任何地方都可见。</p>
<h3>3. 闭包</h3>
<p>作用域的好处是内部函数可以访问定义它们的外部函数的参数和变量。一个更有趣的情形是内部函数拥有比它的额外部函数更长的生命周期。</p>
<pre><code><figure class="highlight"><pre><span class="comment">// 此函数定义了一个value变量，该变量对increment和getValue方法总是可用的，</span>
<span class="comment">// 但函数的作用域使得它对其他的程序来说是不可见的</span>

<span class="comment">// 该函数将返回一个包含两个方法的对象。</span>
<span class="keyword">var</span> myObject = function(){
    <span class="keyword">var</span> <span class="keyword">value</span> = <span class="number">0</span>;
    <span class="keyword">return</span> {
        increment: function(inc) {
            <span class="keyword">value</span> += <span class="keyword">typeof</span> inc === <span class="string">'number'</span> ? inc : <span class="number">1</span>;
        },
        getValue: function(){
            <span class="keyword">return</span> <span class="keyword">value</span>;
        }
    };
}();
</pre></figure></code></pre>
<p>下面是一个更有意义的函数。</p>
<pre><code><figure class="highlight"><pre><span class="comment">// 创建一个名为quo的构造函数</span>
<span class="comment">// 它构造出带有get_status方法和status私有属性的一个对象。</span>
<span class="keyword">var</span> quo = <span class="keyword">function</span>(status){
    <span class="keyword">return</span> {
        get_status: <span class="keyword">function</span>(){
            <span class="keyword">return</span> status;
        }
    };
};

<span class="keyword">var</span> myQuo = quo(<span class="string">'amazed'</span>);
document.writeln(myQuo.get_status());
</pre></figure></code></pre>
<p>
    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2013/09/15/the-good-parts-of-javascript-function-2/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-09-14T07:27:13.000Z"><a href="/2013/09/14/the-good-parts-of-javascript-function-1/">Sep 14 2013</a></time>
    
    
  
    <h1 class="title"><a href="/2013/09/14/the-good-parts-of-javascript-function-1/">JavaScript 规范编程笔记：函数（一）</a></h1>
  

  </header>
  
  <div class="entry">
    
      <blockquote>
<p>一般来说，所谓编程就是将一组需求分解成一组函数与数据结构的技能。</p>
</blockquote>
<p>JavaScript中最好的特性就是它对函数的实现，它几乎无所不能。函数包含子组语句，它们是JavaScript的基础模块单元，用于代码复用、信息隐藏和组合调用。函数指定对象的行为。</p>
<h3>1. 函数对象</h3>
<p>在JavaScrpit中函数也是对象。对象字面量产生的对象连接到Object.prototype上，而函数对象连接到Function.prototype上（该原型对象本身连接到Object.prototype）。每个函数在创建时附有两个附加的隐藏属性：函数的上下文和实现函数行为的代码（JavaScript创建一个函数对象时，会给该对象设置一个“调用”属性）。</p>
<p>每个函数对象在创建时也随带有一个prototype属性。它的值是一个拥有constructor属性且值即为该函数的对象。</p>
<p>因为函数是对象，所以它们可以像任何其他的值一样被使用。函数可以存放在变量、对象和数组中，函数可以被当作参数传递给其他函数，函数也可以再返回函数。而且，因为函数是对象，所以函数可以拥有方法。</p>
<h3>2. 函数字面量</h3>
<pre><code><figure class="highlight"><pre><span class="comment">// 创建一个名为 add 的变量，并用来把两个数字相加的函数赋值给它</span>
<span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> <span class="params">(a, b)</span>{</span>
    <span class="keyword">return</span> a + b;    
};
</pre></figure></code></pre>
<p>函数字面量可以出现在任何允许表达式出现的地方。函数也可以被定义在其他函数中。一个内部函数自然可以访问自己的参数和变量，同时它也能方便的访问它被嵌套在其中的那个函数的参数与变量。通过函数字面量创建的函数对象包含一个连到外部上下文的连接。这被称为<strong>闭包</strong>。</p>
<h3>3. 调用</h3>
<p>在JavaScript中一共有四种调用模式：方法调用模式、函数调用模式、构造器调用模式和apply调用模式。调用函数时，除了声明时定义的形式参数，每个函数接收两个附加的参数：this和arguments。参数this在面向对象变成中非常重要，它的值取决于调用的模式。调用运算符是跟在任何产生一个函数值的表达式之后的一对圆括号。圆括号中包含了参数（如果有的话），当实际参数的个数过多时，超出的参数值将被忽略，如果实际参数值过少，缺失的值将会被替代为undefined。</p>
<p><strong>方法调用模式</strong></p>
<p>当一个函数被保存为对象的一个属性时，我们称它为一个方法。当一个方法被调用时，this被绑定到该对象。</p>
<pre><code><figure class="highlight"><pre><span class="comment">// 常见 myObject,它有一个value属性和一个increment方法</span>
<span class="comment">// increment方法接受一个可选的参数。如果参数不是数字，那么默认使用数字1。</span>
<span class="keyword">var</span> myObject = {
    <span class="keyword">value</span>: <span class="number">0</span>,
    increment: function(inc){
        <span class="keyword">this</span>.<span class="keyword">value</span> += <span class="keyword">typeof</span> inc === <span class="string">'number'</span> ? inc : <span class="number">1</span>;
    }
};

myObject.increment();
document.writeln(myObject.<span class="keyword">value</span>); <span class="comment">// 1</span>

myObject.increment(<span class="number">2</span>);
document.writeln(myObject.<span class="keyword">value</span>); <span class="comment">// 3</span>
</pre></figure></code></pre>
<p>this到对象的绑定发生在调用的时候，这个“超级”迟绑定使得函数可以对this高度复用。通过this可取得它们所属对象的上下文的方法称为<strong>公共方法</strong>。</p>

    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2013/09/14/the-good-parts-of-javascript-function-1/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-09-10T05:18:12.000Z"><a href="/2013/09/10/indifferent-sad/">Sep 10 2013</a></time>
    
    
  
    <h1 class="title"><a href="/2013/09/10/indifferent-sad/">成熟就是当你不再相信爱情的那一刻</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p><img src="http://meiseku.com/moodpo/2013/09/20130903.jpg" alt="成熟就是当你不再相信爱情的那一刻"></p>
<p>周六那天天气阴暗无比，一如我那时的心情。当那个哭泣的电话响彻在耳边时，我眩晕到不行，我都做了些什么，我都做了些什么？之前的晚上我就已经知道，灾难即将到来，我的灾难，父母的灾难，但是即使我花费一个通宵的时间去准备应对，也是无法应对的。因为无解！</p>
<p>于是我对自己说：“当悲剧发生，痛苦来临，每个人都觉得他(她)是最痛苦的那个，其实如果让他(她)拿自己的痛苦与别人的痛苦交换，却会变得犹豫不决。痛苦是无法比较的，痛苦没有大小只有长短。”也只是惘然。人生必然要面对各种各样的灾难，但我却制造做绝的灾难，抛给亲者，使亲者痛仇者快。</p>
<p>面对各种选择我选择了最悲情的一个，结果是惨痛的，在这惨痛的结果面前，爱情显得一文不值。</p>
<p>原来爱情一直以来只是我自己的坚持，事到临头之时，没有人提过她，没有人想到她，我自己也不敢提她，我在想提她一定会被笑掉大牙的，爱情在别人眼里根本不值一提，这就是我坚持的东西，我甚至开始不相信自己，不再相信这么多年那么认真包裹在内心中的她——爱情。</p>
<p>成熟就是当你不再相信爱情的那一刻！</p>
<p>可是我还是说：如果你说你还爱我，我就不让你走...</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-09-06T14:52:23.000Z"><a href="/2013/09/06/the-good-parts-of-javascript-object/">Sep 6 2013</a></time>
    
    
  
    <h1 class="title"><a href="/2013/09/06/the-good-parts-of-javascript-object/">JavaScript 规范编程笔记：对象</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p><img src="http://meiseku.com/moodpo/2013/09/20130904.jpg" alt="对象"></p>
<blockquote>
<p>没有对象我可以试着 new 一个</p>
<p>在其中我可以重载甚至覆盖任何一种方法</p>
<p>但是我却无法重载对你的思念</p>
<p>也许命中注定 </p>
<p>你在我的世界里永远的烙上了静态的属性</p>
<p>而我不慎调用了爱你这个方法</p>
<p>当我义无返顾的把自己作为参数传进这个方法时</p>
<p>我才发现爱上你是一个死循环</p>
</blockquote>
<p>JavaScript的简单类型包括数字、字符串、布尔值（true和false）、null值和undefined值，其他所有的值都是对象。在JavaScript中，数组是对象，函数是对象，正则表达式是对象，当然，对象自然也是对象。对象是属性的容器，其中每个属性都拥有名字和值。属性的名字可以是包括空字符串在内的任意字符串。属性值可以是除undefined值之外的任何值。</p>
<p>JavaScript包括一个原型链特性，允许对象继承另一个对象的属性。</p>
<h3>1. 对象字面量</h3>
<p>对象字面量提供了一种非常方便的创建新对象值得表示法。一个对象字面量就是包裹在一对花括号中的零或多个“名/值”对。</p>
<pre><code><figure class="highlight"><pre><span class="keyword">var</span> empty_<span class="class"><span class="keyword">object</span> = {</span>};

<span class="keyword">var</span> stooge = {
    <span class="string">"first-name"</span>: <span class="string">"Jerome"</span>,
    <span class="string">"last-name"</span>: <span class="string">"Howard"</span>    
};
</pre></figure></code></pre>
<p>对象是可嵌套的。</p>
<pre><code><figure class="highlight"><pre>var flight = {
    <span class="method">airline:</span> <span class="comment">"Oceanic"</span>,
    <span class="method">number:</span> <span class="number">815</span>,
    <span class="method">departure:</span> {
        <span class="class">IATA</span>: <span class="comment">"SYD"</span>,
        <span class="method">time:</span> <span class="comment">"2004-09-22"</span>,
        <span class="method">city:</span> <span class="comment">"Sydney"</span>
    },
    <span class="method">arrival:</span> {
        <span class="class">IATA</span>: <span class="comment">"LAX"</span>,
        <span class="method">time:</span> <span class="comment">"2004-09-23"</span>,
        <span class="method">city:</span> <span class="comment">"Los Angeles"</span>
    }
};
</pre></figure></code></pre>
<h3>2. 检索</h3>
<p>要检索对象中包含的值，可以采用在<code>[]</code>后缀中括住一个字符串表达式的方式。如果字符串表达式是一个常数，也可以使用<code>.</code>表示法代替。</p>

    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2013/09/06/the-good-parts-of-javascript-object/#more" class="more-link">Read More</a>
        </div>
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>



  <article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-09-04T12:14:21.000Z"><a href="/2013/09/04/the-feeling-of-amnesia/">Sep 4 2013</a></time>
    
    
  
    <h1 class="title"><a href="/2013/09/04/the-feeling-of-amnesia/">失忆的感觉</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p><img src="http://meiseku.com/moodpo/2013/09/20130902.jpg" alt="失忆的感觉"></p>
<p>失忆的感觉</p>
<p>如暮色中匆匆路人的脸庞</p>
<p>淡淡划过面前</p>
<p>却留不下一丝色彩</p>
<p>三杯的醉意</p>
<p>滞留着一个不羁的灵魂</p>
<p>只缘闻到了你的苦闷忧郁</p>
<p>痛苦烦躁无奈无解</p>
<p>抓住了缘分</p>
<p>也看不到结局</p>
<p>捕获了一颗心</p>
<p>却理不出周围的烦乱</p>
<p>倾心的结晶</p>
<p>变成了有力的罪证</p>
<p>最执着的信念</p>
<p>走进世俗中可笑的陷阱</p>
<p>也许这世俗的人间</p>
<p>只允许</p>
<p>破碎的身躯</p>
<p>失忆的灵魂</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>




<nav id="pagination">
  
  
    <a href="/page/2/" class="next">Next</a>
  
  <div class="clearfix"></div>
</nav></div>
  </div>
  <div class="widget-wrapper">
    <aside id="sidebar">
  
  
</aside>
<div class="clearfix"></div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2013 <a href="/">yangxiaoxie</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'moodpo' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>