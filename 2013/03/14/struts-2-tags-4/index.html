<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>Struts 2 标签（四） | Moodpo Blog</title>
  <meta name="author" content="yangxiaoxie">
  
  <meta name="description" content="moodpo">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <meta property="og:title" content="Struts 2 标签（四）"/>
  <meta property="og:site_name" content="Moodpo Blog"/>

  <link rel="alternate" href="/atom.xml" title="Moodpo Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-43415414-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>


<body>
  <div class="wrapper">
    <header id="header"><div class="title">
  <h1><a href="/">Moodpo Blog</a></h1>
  <p><a href="/">记录生活点滴，感悟程序人生</a></p>
</div>
<nav class="nav">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
    <div class="content"><article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-03-14T10:38:00.000Z"><a href="/2013/03/14/struts-2-tags-4/">Mar 14 2013</a></time>
    
    
  
    <h1 class="title">Struts 2 标签（四）</h1>
  

  </header>
  
  <div class="entry">
    
      <p>我们已经从宏观上介绍了UI组件架构，现在开始学习使用UI组件标签。首先从总结所有UI组件都使用的属性和方法开始。</p>
<h3>1.通用属性</h3>
<p>所有Struts 2 UI组件标签通用的属性有很多，大部分是底层HTML元素公开的很多属性，这里我们重点关注Struts 2标签最核心的使用。通常情况下，你可以假定Struts 2标签支持底层HTML元素的所有属性。</p>
<p>下面是这些常用通用属性的一个列表，如果属性的数据类型是String，那么属性值会被当作字符串字面值解析，除非使用%{expression}标记；所有非String类型都会被作为OGNL表达式自动求值。</p>
<table class="table table-bordered table-striped table-condensed">
  <tr>
    <td>
      属性
    </td>

    <td>
      主题
    </td>

    <td>
      数据类型
    </td>

    <td>
      描述
    </td>
  </tr>

  <tr>
    <td>
      name
    </td>

    <td>
      simple
    </td>

    <td>
      String
    </td>

    <td>
      设置表单输入元素的name属性。如果没有手工设置value属性，那么也会被传播到组件的value属性。组件自己使用name属性指向ValueStack上的属性作为提交的请求参数值的目标
    </td>
  </tr>

  <tr>
    <td>
      value
    </td>

    <td>
      simple
    </td>

    <td>
      Object
    </td>

    <td>
      指向ValueStack上的属性的OGNL表达式，用来为预填充设置表单输入元素的值。默认为name属性设置的值
    </td>
  </tr>

  <tr>
    <td>
      key
    </td>

    <td>
      simple
    </td>

    <td>
      String
    </td>

    <td>
      从ResourceBundle取得本地化的标签(label)，可以传播到name属性，也可以传播到value属性
    </td>
  </tr>

  <tr>
    <td>
      label
    </td>

    <td>
      XHTML
    </td>

    <td>
      String
    </td>

    <td>
      为组件创建一个HTML标签(label)，如果设定使用key属性和本地化的文本就不需要指定这个属性
    </td>
  </tr>

  <tr>
    <td>
      labelPosition
    </td>

    <td>
      XHTML
    </td>

    <td>
      String
    </td>

    <td>
      元素标签(label)的位置，可选的值是left或者top
    </td>
  </tr>

  <tr>
    <td>
      required
    </td>

    <td>
      XHTML
    </td>

    <td>
      Boolean
    </td>

    <td>
      如果设定为true，那么标签(label)旁边会出现一个星号来暗示这是一个必须的字段。默认情况下，如果一个字段级别的数据验证器通过name属性与这个输入字段关联时，这个值为true
    </td>
  </tr>

  <tr>
    <td>
      id
    </td>

    <td>
      simple
    </td>

    <td>
      String
    </td>

    <td>
      HTML的id属性。如果id属性没有指定，组件会创建一个唯一标识。
    </td>
  </tr>

  <tr>
    <td>
      cssClass
    </td>

    <td>
      simple
    </td>

    <td>
      String
    </td>

    <td>
      HTML的class属性
    </td>
  </tr>

  <tr>
    <td>
      cssStyle
    </td>

    <td>
      simple
    </td>

    <td>
      String
    </td>

    <td>
      HTML的style属性
    </td>
  </tr>

  <tr>
    <td>
      disabled
    </td>

    <td>
      simple
    </td>

    <td>
      String
    </td>

    <td>
      HTML的disablled属性
    </td>
  </tr>

  <tr>
    <td>
      tabindex
    </td>

    <td>
      simple
    </td>

    <td>
      String
    </td>

    <td>
      HTML的tabindex属性
    </td>
  </tr>

  <tr>
    <td>
      theme
    </td>

    <td>
      N/A
    </td>

    <td>
      String
    </td>

    <td>
      在哪个主题下呈现这个组件，默认是xhtml
    </td>
  </tr>

  <tr>
    <td>
      templateDir
    </td>

    <td>
      N/A
    </td>

    <td>
      String
    </td>

    <td>
      用来覆盖从中取出模板的默认目录名
    </td>
  </tr>

  <tr>
    <td>
      template
    </td>

    <td>
      N/A
    </td>

    <td>
      String
    </td>

    <td>
      用来呈现UI标签的模板。
    </td>
  </tr>
</table>

<p>除了上述属性，组件也支持常用的JavaScript事件处理属性，例如onclick和onchange。</p>
<h3>2.简单组件</h3>
<p><strong>1.head组件</strong></p>
<p>这个标签什么事也做不了，但是在支持其他标签方面它起了重要作用。如果某个标签依赖head标签引入的资源，那么省去head标签，这个标签就不能正常工作。下面是使用方法：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Portfolio Registration<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
    <span class="tag">&lt;<span class="title">s:head</span>/&gt;</span>
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
</pre></figure></code></pre>
<p>下面是它生成的内容：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">" . . . styles.css"</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>/&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">language</span>=<span class="value">"JavaScript"</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">". . .dojo.js"</span>/&gt;</span><span class="javascript">
&lt;script language=<span class="string">"JavaScript"</span> type=<span class="string">"text/javascript"</span> src=<span class="string">"dojoRequire.js"</span>/&gt;</span>
</pre></figure></code></pre>
<p><strong>2.form组件</strong></p>
<p>form组件也许是这些组件中最重要的组件，它提供了重要的切入点，form组件是指向Struts 2 动作的表单。除了常用属性外，form组件还使用下面的一些属性：</p>
<table class="table table-bordered table-striped table-condensed">
  <tr>
    <td>
      属性
    </td>

    <td>
      类型
    </td>

    <td>
      描述
    </td>
  </tr>

  <tr>
    <td>
      action
    </td>

    <td>
      String
    </td>

    <td>
      表单提交的目标，可以是Struts2动作的名字或者URL
    </td>
  </tr>

  <tr>
    <td>
      namespace
    </td>

    <td>
      String
    </td>

    <td>
      Struts2命名空间，在这个命名空间中查找命名动作(action属性)，或者从这里开始构建URL。默认为当前命名空间
    </td>
  </tr>

  <tr>
    <td>
      method
    </td>

    <td>
      String
    </td>

    <td>
      与HTML form属性相同，默认为POST
    </td>
  </tr>

  <tr>
    <td>
      target
    </td>

    <td>
      String
    </td>

    <td>
      与HTML form属性相同
    </td>
  </tr>

  <tr>
    <td>
      enctype
    </td>

    <td>
      String
    </td>

    <td>
      上传文件时设置为multipart/form-data
    </td>
  </tr>

  <tr>
    <td>
      validate
    </td>

    <td>
      Boolean
    </td>

    <td>
      与验证框架一起使用，打开客户端JavaScript验证
    </td>
  </tr>
</table>

<p>下面是使用的示例：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">s:form</span> <span class="attribute">action</span>=<span class="value">"Login"</span>&gt;</span>
    ......
<span class="tag">&lt;/<span class="title">s:form</span>&gt;</span> 
</pre></figure></code></pre>
<p>会生成下面的代码：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">form</span> <span class="attribute">id</span>=<span class="value">"Login"</span> <span class="attribute">name</span>=<span class="value">"Login"</span> <span class="attribute">onsubmit</span>=<span class="value">"return true;"</span>
    <span class="attribute">action</span>=<span class="value">"/manningSampleApp/chapterSeven/Login.action"</span> <span class="attribute">method</span>=<span class="value">"POST"</span>&gt;</span>
......
<span class="tag">&lt;/<span class="title">form</span>&gt;</span>
</pre></figure></code></pre>
<p>决定如何创建URL时需要遵循的步骤如下所述</p>
<ul>
<li>如果没有指定action属性，则会重新指向生成当前页面的动作</li>
<li>如果指定了action属性，它首先被当作Struts 2动作解析。如果没有指定namespace属性，那么会在当前请求的命名空间中查找这个动作。如果指定了namespace属性，那么会在指定的命名空间中查找这个动作。注意，指定的动作没有.action的扩展名。</li>
<li>如果action属性中指定的值不是声明性架构中的Struts 2动作，那么这个值会被用来直接构建URL。如果指定的字符串以一个斜线(/)开头，那么它被假定为ServletContext相关，框架会在它之前加上ServletContext的庐江构建一个URL。如果指定的字符串没有已斜线开头，那么这个值会被直接当作URL。注意这种情况下，即使指定了namespace属性也不会使用。</li>
</ul>
<p>下面是使用namespace的示例：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">s:form</span> <span class="attribute">action</span>=<span class="value">"Login"</span> <span class="attribute">namespace</span>=<span class="value">"/chapterFour"</span>&gt;</span>
</pre></figure></code></pre>
<p>会生成下面的代码：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">form</span> <span class="attribute">id</span>=<span class="value">"Login"</span> <span class="attribute">name</span>=<span class="value">"Login"</span> <span class="attribute">onsubmit</span>=<span class="value">"return true;"</span>
<span class="attribute">action</span>=<span class="value">"/manningSampleApp/chapterFour/Login.action"</span> &gt;</span>
</pre></figure></code></pre>
<p>下面是一个使用不映射动作的例子：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">s:form</span> <span class="attribute">action</span>=<span class="value">"/chapterSeven/PortfolioHomePage.jsp"</span>&gt;</span>
</pre></figure></code></pre>
<p>生成代码如下：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">form</span> <span class="attribute">id</span>=<span class="value">"PortfolioHomePage"</span> <span class="attribute">onsubmit</span>=<span class="value">"return true;"</span>
<span class="attribute">action</span>=<span class="value">"/manningSampleApp/chapterSeven/PortfolioHomePage.jsp"</span>&gt;</span>
</pre></figure></code></pre>
<p>最后，如果你指定一个不是以斜线开始的值，并且这个值也不是一个动作，也不是一个完整的URL，那么这个值会被原封不动的输出到action属性中。下面是示例：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">s:form</span> <span class="attribute">action</span>=<span class="value">"MyResource"</span>&gt;</span>    
</pre></figure></code></pre>
<p>这是输出：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">form</span> <span class="attribute">id</span>=<span class="value">"MyResource"</span> <span class="attribute">onsubmit</span>=<span class="value">"return true;"</span> <span class="attribute">action</span>=<span class="value">"MyResource"</span>&gt;</span>
</pre></figure></code></pre>
<p><strong>3.textfield组件</strong></p>
<p>这个组件生成了无处不在的文本输入字段。除了通用属性外，textfield还经常使用一些自己的属性，如下：</p>
<table class="table table-bordered table-striped table-condensed">
  <tr>
    <td>
      属性
    </td>

    <td>
      类型
    </td>

    <td>
      描述
    </td>
  </tr>

  <tr>
    <td>
      maxlength
    </td>

    <td>
      String
    </td>

    <td>
      字段数据的最大长度
    </td>
  </tr>

  <tr>
    <td>
      readonly
    </td>

    <td>
      Boolean
    </td>

    <td>
      如果为true,字段不可编辑
    </td>
  </tr>

  <tr>
    <td>
      size
    </td>

    <td>
      String
    </td>

    <td>
      可视长度
    </td>
  </tr>
</table>

<p><strong>4.password组件</strong></p>
<p>password标签实质上很像textfield标签，除通用属性外，它还经常使用如下属性：</p>
<table class="table table-bordered table-striped table-condensed">
  <tr>
    <td>
      属性
    </td>

    <td>
      类型
    </td>

    <td>
      描述
    </td>
  </tr>

  <tr>
    <td>
      maxlength
    </td>

    <td>
      String
    </td>

    <td>
      字段数据的最大长度
    </td>
  </tr>

  <tr>
    <td>
      readonly
    </td>

    <td>
      Boolean
    </td>

    <td>
      如果为true字段不可编辑
    </td>
  </tr>

  <tr>
    <td>
      size
    </td>

    <td>
      String
    </td>

    <td>
      文本字段的可视长度
    </td>
  </tr>

  <tr>
    <td>
      showPassword
    </td>

    <td>
      Boolean
    </td>

    <td>
      如果设置为true，并且ValueStack中对应的属性有值，那么密码会预填充。默认为false。被填充的值会被伪装。
    </td>
  </tr>
</table>

<p><strong>5.textarea组件</strong></p>
<p>textarea标签生成一个基于HTML的textarea元素的组件。除了通用属性外，它还有一些其他属性：</p>
<table class="table table-bordered table-striped table-condensed">
  <tr>
    <td>
      属性
    </td>

    <td>
      类型
    </td>

    <td>
      描述
    </td>
  </tr>

  <tr>
    <td>
      cols
    </td>

    <td>
      Integer
    </td>

    <td>
      列数
    </td>
  </tr>

  <tr>
    <td>
      rows
    </td>

    <td>
      Integer
    </td>

    <td>
      行数
    </td>
  </tr>

  <tr>
    <td>
      readonly
    </td>

    <td>
      Boolean
    </td>

    <td>
      如果为true字段不可编辑
    </td>
  </tr>

  <tr>
    <td>
      wrap
    </td>

    <td>
      String
    </td>

    <td>
      指定textarea中的内容是否应该被包装起来
    </td>
  </tr>
</table>

<p><strong>6.checkbox组件</strong></p>
<p>checkbox组件使用单个HTML的checkbox元素创建一个Boolean型的组件。注意，这个组件与HTML的checkbox组件不是完全相同，它只能指定Boolean类型的值，与这个标签绑定的Java端的属性必须是Boolean类型的。除了之前的通用属性，checkbox组件也使用下列属性：</p>
<table class="table table-bordered table-striped table-condensed">
  <tr>
    <td>
      属性
    </td>

    <td>
      类型
    </td>

    <td>
      描述
    </td>
  </tr>

  <tr>
    <td>
      fieldValue
    </td>

    <td>
      String
    </td>

    <td>
      被checkbox提交的哦真实值，可能是false或者true，默认是true
    </td>
  </tr>

  <tr>
    <td>
      value
    </td>

    <td>
      String
    </td>

    <td>
      与fieldValue一起使用，决定checkbox是否被选中。如果fieldValue=true，并且value=true，那么组件被选中
    </td>
  </tr>
</table>

<p>预填充通常使用UI组件的value属性完成，对于checkbox组件来说要复杂一些。我们必须指定字段要提交的值以及Java端属性的当前值。在checkbox组件的上下文中他们是不同的值，而在textfield标签中是相同的。</p>
<h3>3.基于集合的组件</h3>
<p>Struts 2 标签支持数组、Map或者List集合类型。集合支持的组件的金币嗯逻辑是Java端的数据以一系列选项的方式呈现给用户，之后用户选择一个选项，这个值随着请求被提交。</p>
<p><strong>1.select组件</strong></p>
<p>select组件可能是最常见的基于几何的UI组件，在Java Web应用程序中，通常利用Collection、Map或者数组中的数据构建这一系列选项。</p>
<p>以下代码展示了select UI组件最简单的用例：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">s:select</span> <span class="attribute">name</span>=<span class="value">"user.name"</span> <span class="attribute">list</span>=<span class="value">"{'Mike','Payal','Silas'}"</span> /&gt;</span>
</pre></figure></code></pre>
<p>select组件的list属性指向了为这个组件提供数据的数据集。通常情况下会使用一个OGNL表达式指向ValueStack上的一系列的数据，而不是用字面值生成的列表。但这里在介绍这个标签时我们尽量简化它的使用。以下代码是上述标签呈现的HTML标记：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">select</span> <span class="attribute">name</span>=<span class="value">"user.name"</span> <span class="attribute">id</span>=<span class="value">"ViewPortfolio_user_name"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"Mike"</span>&gt;</span>Mike<span class="tag">&lt;/<span class="title">option</span>&gt;</span>
    <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"Payal"</span>&gt;</span>Payal<span class="tag">&lt;/<span class="title">option</span>&gt;</span>
    <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"Silas"</span>&gt;</span>Silas<span class="tag">&lt;/<span class="title">option</span>&gt;</span>
<span class="tag">&lt;/<span class="title">select</span>&gt;</span>
</pre></figure></code></pre>
<p>列表中的每一个值都用来创建一个对应的option元素。但是如何预填充呢？由于没有指定value属性，所以会从name属性推断出value属性。如果标签呈现的过程中ValueStack的user.name属性包含了一个值，那么这个值会与所有option元素中的value属性逐一匹配，知道找到相同的值，并将其预选中。上面的情况没有一个选项被预选中，因此user.name属性是没有包含值的。</p>
<p>以下是select UI组件特有的属性：</p>
<table class="table table-bordered table-striped table-condensed">
  <tr>
    <td>
      属性
    </td>

    <td>
      类型
    </td>

    <td>
      描述
    </td>
  </tr>

  <tr>
    <td>
      lisst
    </td>

    <td>
      Collection\ Map\Array\Iterrator
    </td>

    <td>
      用来生成下拉列表选项的数据集合
    </td>
  </tr>

  <tr>
    <td>
      listKey
    </td>

    <td>
      String
    </td>

    <td>
      当list中的元素是复杂类型时，用来指定用作被提交的值的list元素的属性，默认是key
    </td>
  </tr>

  <tr>
    <td>
      listValue
    </td>

    <td>
      String
    </td>

    <td>
      当列表中的元素是复杂类型时，用来指定用作选项内容的list元素的属性。换句话说就是用户看到的字符串。默认是value
    </td>
  </tr>

  <tr>
    <td>
      headerKey
    </td>

    <td>
      String
    </td>

    <td>
      与标题一起使用，如果用户选择了标题，那么指定提交的值
    </td>
  </tr>

  <tr>
    <td>
      headerValue
    </td>

    <td>
      String
    </td>

    <td>
      作为list的标题呈现给用户，例如“States”、“Countries”
    </td>
  </tr>

  <tr>
    <td>
      emptyOption
    </td>

    <td>
      Boolean
    </td>

    <td>
      与标题一起使用，在标题和真实选项之间放置一个空的间隔选项
    </td>
  </tr>

  <tr>
    <td>
      multiple
    </td>

    <td>
      Boolean
    </td>

    <td>
      用户可以选择多个值
    </td>
  </tr>

  <tr>
    <td>
      size
    </td>

    <td>
      String
    </td>

    <td>
      一次显示的选项个数
    </td>
  </tr>
</table>

<p>下面是select标签的一个比较复杂的用例：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">h5</span>&gt;</span>Browse an Artist's Portfolios ( Demo of select component. )<span class="tag">&lt;/<span class="title">h5</span>&gt;</span>
<span class="tag">&lt;<span class="title">s:form</span> <span class="attribute">action</span>=<span class="value">"SelectPortfolio"</span> &gt;</span>
    <span class="tag">&lt;<span class="title">s:select</span> <span class="attribute">name</span>=<span class="value">"username"</span> <span class="attribute">list</span>=<span class="value">'users'</span> <span class="attribute">listKey</span>=<span class="value">"username"</span>
        <span class="attribute">listValue</span>=<span class="value">"username"</span> <span class="attribute">label</span>=<span class="value">"Select an artist"</span> /&gt;</span>
    <span class="tag">&lt;<span class="title">s:submit</span> <span class="attribute">value</span>=<span class="value">"Browse"</span>/&gt;</span>
<span class="tag">&lt;/<span class="title">s:form</span>&gt;</span>
</pre></figure></code></pre>
<p>两个新的属性listKey和listValue是必须的，因为与我们展示的第一个例子不同，支持这个select组件的集合中的数据是复杂的User类型而不是简单的String。listKey属性将对象的一个属性与生成的option元素的value属性绑定，这个属性决定了选项被选中时提交的请求参数值。这里只需一个唯一的标识符即可，显然使用username属性非常适合(已假定username是唯一的)。listValue属性决定了UI下拉列表中用户看到的内容。它相当于生成的option元素包含的字符串。</p>
<p>下面是上述标签生成的HTML代码：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">form</span> <span class="attribute">id</span>=<span class="value">"SelectPortfolio"</span> <span class="attribute">name</span>=<span class="value">"SelectPortfolio"</span>
        <span class="attribute">action</span>=<span class="value">"/manningSampleApp/chapterSeven/SelectPortfolio.action"</span> &gt;</span>
    <span class="tag">&lt;<span class="title">select</span> <span class="attribute">name</span>=<span class="value">"username"</span> <span class="attribute">id</span>=<span class="value">"SelectPortfolio_username"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"Jimmy"</span>&gt;</span>Jimmy<span class="tag">&lt;/<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"Chad"</span>&gt;</span>Chad<span class="tag">&lt;/<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"Mary"</span>&gt;</span>Mary<span class="tag">&lt;/<span class="title">option</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">select</span>&gt;</span>
    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"submit"</span> <span class="attribute">id</span>=<span class="value">"SelectPortfolio_0"</span> <span class="attribute">value</span>=<span class="value">"Browse"</span>/&gt;</span>
<span class="tag">&lt;/<span class="title">form</span>&gt;</span>
</pre></figure></code></pre>
<p>下面展示了用Map类型的数据实现同样功能的代码：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">h5</span>&gt;</span>Browse an Artist's Portfolios ( Demo of select component. )<span class="tag">&lt;/<span class="title">h5</span>&gt;</span>
<span class="tag">&lt;<span class="title">s:form</span> <span class="attribute">action</span>=<span class="value">"SelectPortfolio"</span> &gt;</span>
    <span class="tag">&lt;<span class="title">s:select</span> <span class="attribute">name</span>=<span class="value">"username"</span> <span class="attribute">list</span>=<span class="value">'users'</span> <span class="attribute">listValue</span>=<span class="value">"value.username"</span>
        <span class="attribute">label</span>=<span class="value">"Select an artist"</span> /&gt;</span>
    <span class="tag">&lt;<span class="title">s:submit</span> <span class="attribute">value</span>=<span class="value">"Browse"</span>/&gt;</span>
<span class="tag">&lt;/<span class="title">s:form</span>&gt;</span>
</pre></figure></code></pre>
<p>需要注意的是遍历Map数据时，遍历的是类型为Entry的对象，而Entry有两个属性key和value，这正好是listKey和listValue的默认值，所以在这里无需指定listKey属性的值，而Entry的value属性对应的是User对象，因此listValue使用value.username的方式从中取的username属性的值。</p>
<p><strong>2.radio组件</strong></p>
<p>radio组件提供了很多与select组件相似的功能，但呈现方式不同。下面是除通用属性外，这个组件的一些常用属性列表：</p>
<table class="table table-bordered table-striped table-condensed">
  <tr>
    <td>
      属性
    </td>

    <td>
      类型
    </td>

    <td>
      描述
    </td>
  </tr>

  <tr>
    <td>
      list
    </td>

    <td>
      Collection\ Map\Array\Iterrator
    </td>

    <td>
      用来生成单选项的数据集合
    </td>
  </tr>

  <tr>
    <td>
      listKey
    </td>

    <td>
      String
    </td>

    <td>
      集合的元素的属性，用来作为提交的值，默认是key
    </td>
  </tr>

  <tr>
    <td>
      listValue
    </td>

    <td>
      String
    </td>

    <td>
      集合的元素的属性，用来作为选项的内容，换句话说是用户看到的字符串。默认是value
    </td>
  </tr>
</table>

<p>下面是这个组件在页面上的显示：</p>
<p><img src="http://meiseku.com/moodpo/2013/03/2146681631.png" alt="radio tag.png" title="radio tag.png"></p>
<p>这个标签的使用几乎与select组件完全相同，因此我们不会讲解这个组件的详细内容。</p>
<p><strong>3.checkboxlist组件</strong></p>
<p>checkboxlist组件与select组件也很相似。如下图所示，它呈现了相同的选项，但使用了多选框，因此它允许选择多个选项。</p>
<p><img src="http://meiseku.com/moodpo/2013/03/319284732.png" alt="checkboxlist tag.png" title="checkboxlist tag.png"></p>
<p>此外，checkboxlist组件还经常使用下面的属性：</p>
<table class="table table-bordered table-striped table-condensed">
  <tr>
    <td>
      属性
    </td>

    <td>
      类型
    </td>

    <td>
      描述
    </td>
  </tr>

  <tr>
    <td>
      list
    </td>

    <td>
      Collection\ Map\Array\Iterrator
    </td>

    <td>
      用来生成复选项的数据集合
    </td>
  </tr>

  <tr>
    <td>
      listKey
    </td>

    <td>
      String
    </td>

    <td>
      集合的元素的属性，用来作为提交的值，默认是key
    </td>
  </tr>

  <tr>
    <td>
      listValue
    </td>

    <td>
      String
    </td>

    <td>
      集合的元素的属性，用来作为选项的内容，换句话说是用户看到的字符串。默认是value
    </td>
  </tr>
</table>

<p><strong>4.预选中基于集合的组件</strong></p>
<p>value属性指向了ValueStack上的一个属性，这个属性会用作组件的当前值预先选择一个选项。通常不设置value属性，而是让框架根据name属性推断出value属性。每一个HTML的选项都有一个value属性，这个属性表示这个选项被选中时整个组件的值。巧妙的地方是框架使用Struts2标签的value属性的值来匹配某一个选项的值，在匹配时，这个选项被选中。</p>
<p>例如下面的代码，其中defaultUsername中包含了后台传入的默认的用户名chad：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">s:form</span> <span class="attribute">action</span>=<span class="value">"SelectPortfolio"</span> &gt;</span>
    <span class="tag">&lt;<span class="title">s:radio</span> <span class="attribute">name</span>=<span class="value">"username"</span> <span class="attribute">list</span>=<span class="value">'users'</span> <span class="attribute">value</span>=<span class="value">"defaultUsername"</span>
            <span class="attribute">listKey</span>=<span class="value">"username"</span> <span class="attribute">listValue</span>=<span class="value">"username"</span> <span class="attribute">label</span>=<span class="value">"Select an artist"</span> /&gt;</span>
    <span class="tag">&lt;<span class="title">s:submit</span> <span class="attribute">value</span>=<span class="value">"Browse"</span>/&gt;</span>
<span class="tag">&lt;/<span class="title">s:form</span>&gt;</span>
</pre></figure></code></pre>
<p>以上代码最终会输出下面的HTML代码：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"radio"</span> <span class="attribute">name</span>=<span class="value">"username"</span> <span class="attribute">value</span>=<span class="value">"Jimmy"</span>/&gt;</span>
<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"radio"</span> <span class="attribute">name</span>=<span class="value">"username"</span> <span class="attribute">value</span>=<span class="value">"Charlie Joe"</span>/&gt;</span>
<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"radio"</span> <span class="attribute">name</span>=<span class="value">"username"</span> <span class="attribute">checked</span>=<span class="value">"checked"</span> <span class="attribute">value</span>=<span class="value">"Chad"</span>/&gt;</span>
<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"radio"</span> <span class="attribute">name</span>=<span class="value">"username"</span> <span class="attribute">value</span>=<span class="value">"Mary"</span>/&gt;</span>
</pre></figure></code></pre>
<p>相同的预选中的过程同样适用于所有基于集合的组件，如果是多重选中的情况，value属性可以指向一个包含多个选择的属性，例如一个包含用户名的数组，那么这个数组会选中这些值中的每一个。</p>
<h3>4.额外的组件</h3>
<p><strong>1.label组件</strong></p>
<p>label(标签)组件不应该与前面讲解的UI组件生成的标签(label)相混淆。label组件在HTML只输出只读文本，很像一个只读的textfield组件。下面是一个用例：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">s:label</span> <span class="attribute">name</span>=<span class="value">"username"</span> <span class="attribute">label</span>=<span class="value">"Username"</span> /&gt;</span>
</pre></figure></code></pre>
<p><strong>2.hidden组件</strong></p>
<p>hidden组件用来是实现隐藏域，以下是使用的标记及输出的HTML：</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">s:hidden</span> <span class="attribute">name</span>=<span class="value">"username"</span> /&gt;</span>

<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"hidden"</span> <span class="attribute">name</span>=<span class="value">"username"</span> <span class="attribute">value</span>=<span class="value">"Chad"</span>
          <span class="attribute">id</span>=<span class="value">"UpdateAccount_username"</span>/&gt;</span>
</pre></figure></code></pre>
<p><strong>3.doubleselect组件</strong></p>
<p>doubleselect(关联下拉列表)组件可实现下拉列表的联动效果，下面是常见的使用方法，其中protfolios即使User对象的属性，而它本神又是一个集合；</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">h4</span>&gt;</span>Select a portfolio to view.<span class="tag">&lt;/<span class="title">h4</span>&gt;</span>
<span class="tag">&lt;<span class="title">s:form</span> <span class="attribute">action</span>=<span class="value">"ViewPortfolio"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">s:doubleselect</span> <span class="attribute">name</span>=<span class="value">"username"</span> <span class="attribute">list</span>=<span class="value">'users'</span> <span class="attribute">listKey</span>=<span class="value">"username"</span>
            <span class="attribute">listValue</span>=<span class="value">"username"</span> <span class="attribute">doubleName</span>=<span class="value">"portfolioName"</span>
            <span class="attribute">doubleList</span>=<span class="value">"portfolios"</span> <span class="attribute">doubleListValue</span>=<span class="value">"name"</span> /&gt;</span>
    <span class="tag">&lt;<span class="title">s:submit</span> <span class="attribute">value</span>=<span class="value">"View"</span>/&gt;</span>
<span class="tag">&lt;/<span class="title">s:form</span>&gt;</span>
</pre></figure></code></pre>

    
  </div>
  <footer>
    
      
  
  <div class="categories">
    <a href="/categories/My-Work/">My Work</a>
  </div>

      
  
  <div class="tags">
    <a href="/tags/struts2/">struts2</a>, <a href="/tags/J2EE/">J2EE</a>
  </div>

    
    <div class="clearfix"></div>
  </footer>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>
  <div class="ds-thread" data-title="Struts 2 标签（四）">
  </div>
</section>
</div>
  </div>
  <div class="widget-wrapper">
    <aside id="sidebar">
  
  
</aside>
<div class="clearfix"></div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2013 <a href="/">yangxiaoxie</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'moodpo' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>